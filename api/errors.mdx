---
title: "Error Handling"
description: "Understand API error codes and implement robust error handling."
keywords: ["errors", "error handling", "status codes", "troubleshooting"]
---

The ShortKit API uses conventional HTTP status codes and returns structured error responses to help you handle failures gracefully.

## Error response format

All errors follow a consistent envelope structure. The `errors` array contains one or more error objects:

```json
{
  "data": null,
  "meta": {
    "request_id": "req_8f3a2b1c"
  },
  "errors": [
    {
      "code": "invalid_request",
      "message": "The 'limit' parameter must be an integer between 1 and 50.",
      "field": "limit"
    }
  ]
}
```

### Error object fields

<ResponseField name="code" type="string" required>
  Machine-readable error code for programmatic handling. See the full list in [Error codes reference](#error-codes-reference).
</ResponseField>

<ResponseField name="message" type="string" required>
  Human-readable description of what went wrong. Suitable for logging but not guaranteed to be stable across versions -- use `code` for programmatic branching.
</ResponseField>

<ResponseField name="field" type="string">
  The request field that caused the error, when applicable. Present on validation errors to identify which parameter failed.
</ResponseField>

<ResponseField name="meta.request_id" type="string" required>
  Unique identifier for the request. Include this value when contacting support.
</ResponseField>

## HTTP status codes

| Code | Meaning | When it occurs |
|------|---------|----------------|
| `400` | Bad Request | Malformed JSON, missing required fields, or invalid parameter values |
| `401` | Unauthorized | Missing or invalid API key |
| `403` | Forbidden | Valid key but insufficient permissions for this endpoint |
| `404` | Not Found | The requested resource does not exist |
| `409` | Conflict | Resource state conflict (e.g., content still processing) |
| `422` | Unprocessable Entity | Request is well-formed but contains semantic errors (e.g., unsupported file format) |
| `429` | Too Many Requests | Organization rate limit exceeded |
| `500` | Internal Server Error | An unexpected error occurred on our end |

## Error codes reference

### Authentication errors

| Code | HTTP Status | Description |
|------|-------------|-------------|
| `invalid_api_key` | 401 | The API key is missing, malformed, or has been revoked |
| `forbidden` | 403 | The key type does not have permission for this endpoint (e.g., publishable key on a secret-key endpoint) |

### Validation errors

| Code | HTTP Status | Description |
|------|-------------|-------------|
| `invalid_request` | 400 | Malformed request body, missing required fields, or invalid parameter types |

### Resource errors

| Code | HTTP Status | Description |
|------|-------------|-------------|
| `not_found` | 404 | The requested content ID or resource does not exist |
| `conflict` | 409 | The resource is in a state that conflicts with the request |

### Content errors

| Code | HTTP Status | Description |
|------|-------------|-------------|
| `invalid_media_type` | 422 | The uploaded file is not a supported video format |
| `file_too_large` | 422 | The uploaded file exceeds the maximum allowed size |
| `duration_exceeded` | 422 | The video exceeds the maximum allowed duration |

### Rate limiting errors

| Code | HTTP Status | Description |
|------|-------------|-------------|
| `rate_limited` | 429 | Too many requests. Check the `Retry-After` header for when to retry. |

### Server errors

| Code | HTTP Status | Description |
|------|-------------|-------------|
| `internal_error` | 500 | An unexpected error occurred on our end. If this persists, contact support with the `request_id`. |

## Handling errors

<Tabs>
  <Tab title="curl">
    ```bash
    # Make a request and inspect the response
    curl -s -w "\nHTTP Status: %{http_code}\n" \
      https://api.shortkit.dev/v1/feed?limit=100 \
      -H "X-API-Key: pk_live_your_publishable_key"

    # Response:
    # {
    #   "data": null,
    #   "meta": {
    #     "request_id": "req_8f3a2b1c"
    #   },
    #   "errors": [
    #     {
    #       "code": "invalid_request",
    #       "message": "The 'limit' parameter must be an integer between 1 and 50.",
    #       "field": "limit"
    #     }
    #   ]
    # }
    # HTTP Status: 400
    ```
  </Tab>
  <Tab title="Python">
    ```python
    import requests
    import time

    API_BASE = "https://api.shortkit.dev/v1"
    SECRET_KEY = "sk_live_your_secret_key"


    def create_upload(data, max_retries=3):
        for attempt in range(max_retries + 1):
            response = requests.post(
                f"{API_BASE}/uploads",
                headers={
                    "Authorization": f"Bearer {SECRET_KEY}",
                    "Content-Type": "application/json",
                },
                json=data,
            )

            if response.status_code == 200:
                return response.json()["data"]

            body = response.json()
            errors = body.get("errors", [])
            error = errors[0] if errors else {}
            code = error.get("code", "unknown")
            message = error.get("message", "Unknown error")
            request_id = body.get("meta", {}).get("request_id")

            if response.status_code == 429 and attempt < max_retries:
                retry_after = int(response.headers.get("Retry-After", 2))
                print(f"Rate limited. Retrying in {retry_after}s...")
                time.sleep(retry_after)
                continue

            if response.status_code == 401:
                raise AuthenticationError(f"{code}: {message} (request_id: {request_id})")

            if response.status_code == 403:
                raise PermissionError(f"{code}: {message} (request_id: {request_id})")

            if response.status_code >= 500 and attempt < max_retries:
                delay = 2 ** attempt
                print(f"Server error. Retrying in {delay}s...")
                time.sleep(delay)
                continue

            raise APIError(f"{code}: {message} (request_id: {request_id})")

        raise APIError("Max retries exceeded")
    ```
  </Tab>
  <Tab title="Node.js">
    ```javascript
    const API_BASE = "https://api.shortkit.dev/v1";
    const SECRET_KEY = "sk_live_your_secret_key";

    async function createUpload(data, maxRetries = 3) {
      for (let attempt = 0; attempt <= maxRetries; attempt++) {
        const response = await fetch(`${API_BASE}/uploads`, {
          method: "POST",
          headers: {
            Authorization: `Bearer ${SECRET_KEY}`,
            "Content-Type": "application/json",
          },
          body: JSON.stringify(data),
        });

        if (response.ok) {
          const body = await response.json();
          return body.data;
        }

        const body = await response.json();
        const error = body.errors?.[0] ?? {};
        const requestId = body.meta?.request_id;

        if (response.status === 429 && attempt < maxRetries) {
          const retryAfter = parseInt(response.headers.get("Retry-After") ?? "2", 10);
          console.log(`Rate limited. Retrying in ${retryAfter}s...`);
          await sleep(retryAfter * 1000);
          continue;
        }

        if (response.status === 401) {
          throw new Error(`Authentication failed: ${error.message} (request_id: ${requestId})`);
        }

        if (response.status === 403) {
          throw new Error(`Permission denied: ${error.message} (request_id: ${requestId})`);
        }

        if (response.status >= 500 && attempt < maxRetries) {
          const delay = Math.pow(2, attempt) * 1000;
          console.log(`Server error. Retrying in ${delay / 1000}s...`);
          await sleep(delay);
          continue;
        }

        throw new Error(`API error [${error.code}]: ${error.message} (request_id: ${requestId})`);
      }

      throw new Error("Max retries exceeded");
    }

    function sleep(ms) {
      return new Promise((resolve) => setTimeout(resolve, ms));
    }
    ```
  </Tab>
  <Tab title="Swift">
    ```swift
    import Foundation

    enum ShortKitError: Error {
        case authentication(message: String, requestId: String?)
        case forbidden(message: String, requestId: String?)
        case validation(message: String, field: String?, requestId: String?)
        case rateLimited(retryAfter: Int, requestId: String?)
        case server(message: String, requestId: String?)
        case unknown(message: String, requestId: String?)
    }

    func createUpload(data: [String: Any]) async throws -> [String: Any] {
        let url = URL(string: "https://api.shortkit.dev/v1/uploads")!
        var request = URLRequest(url: url)
        request.httpMethod = "POST"
        request.setValue("Bearer sk_live_your_secret_key", forHTTPHeaderField: "Authorization")
        request.setValue("application/json", forHTTPHeaderField: "Content-Type")
        request.httpBody = try JSONSerialization.data(withJSONObject: data)

        let (responseData, response) = try await URLSession.shared.data(for: request)
        let httpResponse = response as! HTTPURLResponse
        let body = try JSONSerialization.jsonObject(with: responseData) as! [String: Any]
        let meta = body["meta"] as? [String: Any]
        let requestId = meta?["request_id"] as? String

        guard httpResponse.statusCode == 200 else {
            let errors = body["errors"] as? [[String: Any]]
            let error = errors?.first ?? [:]
            let code = error["code"] as? String ?? "unknown"
            let message = error["message"] as? String ?? "Unknown error"

            switch httpResponse.statusCode {
            case 401:
                throw ShortKitError.authentication(message: message, requestId: requestId)
            case 403:
                throw ShortKitError.forbidden(message: message, requestId: requestId)
            case 400, 422:
                let field = error["field"] as? String
                throw ShortKitError.validation(message: message, field: field, requestId: requestId)
            case 429:
                let retryAfter = Int(httpResponse.value(forHTTPHeaderField: "Retry-After") ?? "2") ?? 2
                throw ShortKitError.rateLimited(retryAfter: retryAfter, requestId: requestId)
            case 500...599:
                throw ShortKitError.server(message: message, requestId: requestId)
            default:
                throw ShortKitError.unknown(message: "\(code): \(message)", requestId: requestId)
            }
        }

        return body["data"] as! [String: Any]
    }
    ```
  </Tab>
</Tabs>

## Retry strategy

For transient errors (`429` and `500`), implement retry logic with exponential backoff:

1. **429 Too Many Requests** -- Read the `Retry-After` header and wait the specified number of seconds before retrying.
2. **500 Internal Server Error** -- Wait with exponential backoff: 1 second, then 2 seconds, then 4 seconds. Stop after 3 retries.

Do **not** retry `400`, `401`, `403`, `404`, `409`, or `422` errors. These indicate a problem with the request itself and retrying will produce the same result.

## Validation errors with multiple fields

When a request fails validation on multiple fields, the `errors` array contains one entry per field:

```json
{
  "data": null,
  "meta": {
    "request_id": "req_4d5e6f7a"
  },
  "errors": [
    {
      "code": "invalid_request",
      "message": "Title is required.",
      "field": "title"
    },
    {
      "code": "invalid_request",
      "message": "Tags must be an array of strings.",
      "field": "tags"
    }
  ]
}
```

## Debugging with request IDs

Every API response includes a `meta.request_id` field. When reporting an issue to ShortKit support, always include the request ID to enable fast diagnosis.

The request ID is also returned in the `X-Request-Id` response header:

```bash
curl -i https://api.shortkit.dev/v1/feed \
  -H "X-API-Key: pk_live_your_publishable_key"

# Response headers include:
# X-Request-Id: req_8f3a2b1c
```

## Common issues

<AccordionGroup>
  <Accordion title="401 Unauthorized with a valid key">
    - Verify there is no extra whitespace or newline in the key value
    - Confirm the key has not been revoked in the ShortKit Dashboard
    - Check that you are using the correct header: `X-API-Key` for publishable keys, `Authorization: Bearer` for secret keys
    - Ensure the environment matches -- a `test` key cannot access `live` endpoints
  </Accordion>
  <Accordion title="403 Forbidden on upload endpoints">
    Upload endpoints (`POST /v1/uploads`) require a **secret key** (`sk_live_` or `sk_test_`). Publishable keys are read-only and cannot create content.
  </Accordion>
  <Accordion title="429 Too Many Requests">
    Your organization has exceeded its per-minute request limit. Read the `Retry-After` response header to determine how long to wait. If you consistently hit rate limits, consider upgrading your plan or optimizing request frequency.
  </Accordion>
  <Accordion title="Intermittent 500 errors">
    - Check the [ShortKit Status Page](https://status.shortkit.dev) for ongoing incidents
    - Implement retry logic with exponential backoff for transient failures
    - Contact support with the `request_id` values from the error responses
  </Accordion>
</AccordionGroup>

## Next steps

<CardGroup cols={2}>
  <Card title="Authentication" icon="key" href="/api/authentication">
    Learn about API key types and authentication methods.
  </Card>
  <Card title="API Introduction" icon="book" href="/api/introduction">
    Overview of API design, response envelope, and pagination.
  </Card>
</CardGroup>
