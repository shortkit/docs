---
title: "Experiments"
description: "Create and manage A/B tests for configuration and ranking."
keywords: ["experiments", "A/B testing", "variants", "API"]
---

The Experiments API allows you to run A/B tests by assigning users to different configuration variants. Experiments are delivered through the [config overlay system](/api/configuration) -- each variant specifies a config overlay that is merged on top of the organization-level overlay for users in that variant group.

## Endpoints

| Method | Endpoint | Auth | Description |
|--------|----------|------|-------------|
| `GET` | `/v1/experiments` | Secret key | List experiments |
| `POST` | `/v1/experiments` | Secret key | Create experiment |
| `GET` | `/v1/experiments/{id}` | Secret key | Get experiment details |
| `PATCH` | `/v1/experiments/{id}` | Secret key | Update experiment (draft only) |
| `POST` | `/v1/experiments/{id}/start` | Secret key | Start experiment |
| `POST` | `/v1/experiments/{id}/stop` | Secret key | Stop experiment |
| `GET` | `/v1/experiments/{id}/results` | Secret key | Get experiment results |
| `DELETE` | `/v1/experiments/{id}` | Secret key | Delete experiment (draft only) |

## Experiment types

| Type | Description | What the variant controls |
|------|-------------|--------------------------|
| `config` | Test different SDK configuration values | Config overlay fields (controls, playback, theme, etc.) |
| `ranking` | Test different feed ranking strategies | Ranking parameters (when signal-weighted ranking is available) |

## How experiments work

1. You create an experiment with two or more variants, each specifying a config overlay
2. You allocate a percentage of total traffic to the experiment
3. Within the experiment, traffic is split across variants
4. When a user in the experiment group calls `GET /v1/config`, the response merges the variant's overlay on top of the organization overlay
5. The SDK applies the merged config, and the user experiences the variant without any app-side changes
6. ShortKit tracks metrics for each variant automatically based on event data

## List experiments

```bash
GET /v1/experiments
```

<ParamField query="status" type="string">
  Filter by status: `draft`, `running`, `completed`, `stopped`.
</ParamField>

<ParamField query="limit" type="integer" default={20}>
  Items per page.
</ParamField>

### Example request

```bash
curl "https://api.shortkit.dev/v1/experiments?status=running" \
  -H "Authorization: Bearer sk_live_your_secret_key"
```

### Response

```json
{
  "data": [
    {
      "id": "exp_abc123",
      "name": "Preload count test",
      "description": "Testing whether preloading more videos improves watch time",
      "status": "running",
      "type": "config",
      "traffic": 0.20,
      "variants": [
        { "id": "control", "name": "Control (3 preload)", "traffic": 0.5 },
        { "id": "treatment", "name": "5 preload", "traffic": 0.5 }
      ],
      "startedAt": "2026-02-01T12:00:00Z",
      "createdAt": "2026-01-28T10:00:00Z"
    }
  ],
  "meta": {
    "total": 3,
    "request_id": "req_abc123"
  }
}
```

## Create experiment

Create a new A/B test. Experiments start in `draft` status and must be explicitly started.

```bash
POST /v1/experiments
```

### Request body

<ParamField body="name" type="string" required>
  Experiment name.
</ParamField>

<ParamField body="description" type="string">
  Experiment description.
</ParamField>

<ParamField body="type" type="string" required>
  Experiment type: `config` or `ranking`.
</ParamField>

<ParamField body="traffic" type="number" required>
  Fraction of total users enrolled in the experiment (0.0 to 1.0). Users not in the experiment receive the standard config overlay.
</ParamField>

<ParamField body="variants" type="array" required>
  Two or more experiment variants. Traffic allocations within variants must sum to 1.0.
  <Expandable title="variant properties">
    <ParamField body="id" type="string" required>
      Variant identifier (e.g., `control`, `treatment`).
    </ParamField>
    <ParamField body="name" type="string" required>
      Human-readable variant name.
    </ParamField>
    <ParamField body="traffic" type="number" required>
      Traffic allocation within the experiment (must sum to 1.0 across all variants).
    </ParamField>
    <ParamField body="config" type="object" required>
      Config overlay for this variant. Uses the same structure as `PUT /v1/config`.
    </ParamField>
  </Expandable>
</ParamField>

<ParamField body="metrics" type="string[]">
  Metrics to track for the experiment: `completionRate`, `watchTime`, `sessionsPerUser`.
</ParamField>

### Example: Config experiment

Test whether hiding the scrubber increases completion rate:

```bash
curl -X POST https://api.shortkit.dev/v1/experiments \
  -H "Authorization: Bearer sk_live_your_secret_key" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Scrubber visibility test",
    "description": "Testing whether hiding the scrubber increases completion rate",
    "type": "config",
    "traffic": 0.20,
    "variants": [
      {
        "id": "control",
        "name": "Scrubber visible",
        "traffic": 0.5,
        "config": {
          "controls": {
            "scrubber": true
          }
        }
      },
      {
        "id": "no_scrubber",
        "name": "Scrubber hidden",
        "traffic": 0.5,
        "config": {
          "controls": {
            "scrubber": false
          }
        }
      }
    ],
    "metrics": ["completionRate", "watchTime"]
  }'
```

### Example: Preload count experiment

Test whether preloading more videos improves the experience:

```bash
curl -X POST https://api.shortkit.dev/v1/experiments \
  -H "Authorization: Bearer sk_live_your_secret_key" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Preload count test",
    "description": "Testing preload count impact on watch time and rebuffer rate",
    "type": "config",
    "traffic": 0.30,
    "variants": [
      {
        "id": "control",
        "name": "3 preload (default)",
        "traffic": 0.33,
        "config": {
          "playback": { "preloadCount": 3 }
        }
      },
      {
        "id": "preload_5",
        "name": "5 preload",
        "traffic": 0.33,
        "config": {
          "playback": { "preloadCount": 5 }
        }
      },
      {
        "id": "preload_1",
        "name": "1 preload",
        "traffic": 0.34,
        "config": {
          "playback": { "preloadCount": 1 }
        }
      }
    ],
    "metrics": ["watchTime", "sessionsPerUser"]
  }'
```

### Response

```json
{
  "data": {
    "id": "exp_xyz789",
    "name": "Scrubber visibility test",
    "status": "draft",
    "type": "config",
    "traffic": 0.20,
    "variants": [
      { "id": "control", "name": "Scrubber visible", "traffic": 0.5 },
      { "id": "no_scrubber", "name": "Scrubber hidden", "traffic": 0.5 }
    ],
    "metrics": ["completionRate", "watchTime"],
    "createdAt": "2026-02-05T12:00:00Z"
  },
  "meta": {
    "request_id": "req_exp123"
  }
}
```

## Start experiment

Begin running an experiment. Users will start being assigned to variants.

```bash
POST /v1/experiments/{id}/start
```

```bash
curl -X POST https://api.shortkit.dev/v1/experiments/exp_xyz789/start \
  -H "Authorization: Bearer sk_live_your_secret_key"
```

```json
{
  "data": {
    "id": "exp_xyz789",
    "status": "running",
    "startedAt": "2026-02-05T12:00:00Z"
  }
}
```

## Stop experiment

End an experiment. Optionally declare a winning variant to roll out its config overlay to all users.

```bash
POST /v1/experiments/{id}/stop
```

<ParamField body="winner" type="string">
  Variant ID to roll out as the new organization config overlay.
</ParamField>

<ParamField body="reason" type="string">
  Reason for stopping the experiment.
</ParamField>

```bash
curl -X POST https://api.shortkit.dev/v1/experiments/exp_xyz789/stop \
  -H "Authorization: Bearer sk_live_your_secret_key" \
  -H "Content-Type: application/json" \
  -d '{
    "winner": "no_scrubber",
    "reason": "Statistical significance reached -- 12% lift in completion rate"
  }'
```

## Get results

Retrieve experiment results and statistical analysis.

```bash
GET /v1/experiments/{id}/results
```

```bash
curl https://api.shortkit.dev/v1/experiments/exp_abc123/results \
  -H "Authorization: Bearer sk_live_your_secret_key"
```

### Response

```json
{
  "data": {
    "experimentId": "exp_abc123",
    "status": "running",
    "duration": {
      "days": 7,
      "startedAt": "2026-01-28T12:00:00Z"
    },
    "variants": [
      {
        "id": "control",
        "name": "Scrubber visible",
        "participants": 12500,
        "metrics": {
          "completionRate": {
            "value": 0.42,
            "confidence": 0.95
          },
          "watchTime": {
            "value": 28.5,
            "confidence": 0.95
          }
        }
      },
      {
        "id": "no_scrubber",
        "name": "Scrubber hidden",
        "participants": 12480,
        "metrics": {
          "completionRate": {
            "value": 0.47,
            "confidence": 0.95,
            "lift": 0.119,
            "significant": true
          },
          "watchTime": {
            "value": 31.2,
            "confidence": 0.95,
            "lift": 0.095,
            "significant": true
          }
        }
      }
    ],
    "recommendation": {
      "winner": "no_scrubber",
      "confidence": 0.97
    }
  },
  "meta": {
    "request_id": "req_res456"
  }
}
```

## Update experiment

Modify experiment settings. Only experiments in `draft` status can be updated.

```bash
PATCH /v1/experiments/{id}
```

<ParamField body="name" type="string">
  Updated name.
</ParamField>

<ParamField body="description" type="string">
  Updated description.
</ParamField>

<ParamField body="traffic" type="number">
  Updated traffic allocation.
</ParamField>

```bash
curl -X PATCH https://api.shortkit.dev/v1/experiments/exp_xyz789 \
  -H "Authorization: Bearer sk_live_your_secret_key" \
  -H "Content-Type: application/json" \
  -d '{
    "traffic": 0.30
  }'
```

<Warning>
  Experiments can only be modified in `draft` status. Running experiments cannot be changed.
</Warning>

## Delete experiment

Delete an experiment. Only experiments in `draft` or `stopped` status can be deleted.

```bash
DELETE /v1/experiments/{id}
```

```bash
curl -X DELETE https://api.shortkit.dev/v1/experiments/exp_xyz789 \
  -H "Authorization: Bearer sk_live_your_secret_key"
```

<Warning>
  Running experiments cannot be deleted. Stop the experiment first.
</Warning>

## Best practices

<AccordionGroup>
  <Accordion title="Run experiments for sufficient duration">
    Wait for statistical significance before drawing conclusions. Typically 1-2 weeks minimum depending on traffic volume.
  </Accordion>
  <Accordion title="Start with small traffic allocation">
    Begin with 10-20% of traffic and increase if no negative impact is detected.
  </Accordion>
  <Accordion title="Test one variable at a time">
    Isolate the effect of a single config change per experiment. Testing multiple changes simultaneously makes it difficult to attribute results.
  </Accordion>
  <Accordion title="Monitor guardrail metrics">
    Even if your primary metric improves, watch for negative impacts on other metrics (e.g., improving completion rate but increasing rebuffer rate).
  </Accordion>
</AccordionGroup>

## Next steps

<Columns cols={2}>
  <Card title="Configuration API" icon="gear" href="/api/configuration">
    Manage the config overlay that experiments extend.
  </Card>
  <Card title="Ranking" icon="sort" href="/api/ranking">
    Feed ranking and editorial controls.
  </Card>
</Columns>
